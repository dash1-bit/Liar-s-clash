<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Gambit Liar's</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="appRoot" class="app-root">
    <section id="homeScreen" class="screen active" aria-label="Home">
      <div class="home-hero">
        <h1 class="app-title app-title--hero">Gambit Liar's</h1>
        <p class="home-tagline">Win the mind game.</p>
      </div>
      <div class="screen-card home-card">
        <div class="home-stats-row">
          <p class="level-pill">Level <span id="homeLevelValue">1</span></p>
          <p class="level-pill">Ranking <span id="homeRankingValue">1000</span></p>
        </div>

        <button id="avatarPreviewBtn" class="avatar-preview" type="button" aria-label="Choose avatar">
          <span id="avatarPreviewArt" class="avatar-art avatar-1"></span>
          <span id="avatarPreviewLabel" class="avatar-preview-label">Avatar 1</span>
        </button>

        <label class="field-label" for="playerNameInput">Player Name</label>
        <input id="playerNameInput" class="text-input" type="text" maxlength="18" value="Matt" autocomplete="off" />

        <button id="homePlayBtn" class="btn btn-primary btn-play-pulse" type="button">PLAY</button>
        <button id="premiumBtn" class="btn btn-premium" type="button">Become Premium</button>
      </div>
      <section class="home-tips" aria-label="Tips">
        <p class="home-tips-title">Tips</p>
        <p id="homeTipText" class="home-tip-text">Bluff early to learn how your opponent reacts.</p>
        <div id="homeTipDots" class="home-tip-dots" aria-label="Tip indicators"></div>
      </section>
    </section>

    <section id="modeScreen" class="screen" aria-label="Mode Select">
      <div class="top-row">
        <button id="modeBackBtn" class="btn btn-back" type="button">Back to Menu</button>
      </div>
      <div class="screen-card mode-card">
        <h2 class="section-title mode-game-title">Gambit Liar's</h2>
        <p class="helper-text mode-subtitle">Choose Mode</p>
        <button id="playBotBtn" class="btn mode-btn" type="button">Play vs Bot</button>
        <button id="playFriendBtn" class="btn mode-btn" type="button">Play vs a Friend</button>
        <button id="tournamentsBtn" class="btn mode-btn mode-btn-disabled" type="button" aria-disabled="true">Tournaments</button>
        <div class="mode-helper">
          <p class="helper-text mode-helper-text">First time? Learn in 20 seconds.</p>
          <button id="startTutorialBtn" class="btn btn-secondary mode-helper-btn" type="button">Start Tutorial</button>
        </div>
      </div>
    </section>

    <section id="friendScreen" class="screen" aria-label="Friend Setup">
      <div class="top-row">
        <button id="friendBackBtn" class="btn btn-back" type="button">Back to Menu</button>
      </div>
      <div class="screen-card friend-card">
        <h2 class="section-title">Play with a Friend</h2>
        <p class="helper-text">Create a room link and share it. Your friend auto-joins from the link.</p>
        <button id="createLinkBtn" class="btn mode-btn" type="button">Create link</button>

        <div id="friendLinkBlock" class="friend-link-block hidden">
          <label class="field-label" for="hostLinkInput">Host link</label>
          <input id="hostLinkInput" class="text-input" type="text" readonly />
          <label class="field-label" for="friendLinkInput">Guest link</label>
          <div class="link-copy-row">
            <input id="friendLinkInput" class="text-input" type="text" readonly />
            <button id="copyFriendLinkBtn" class="btn btn-copy" type="button">Copy link</button>
          </div>
          <p id="friendConnectionStatusText" class="helper-text">Status: Idle</p>
          <p id="friendConnectionErrorText" class="helper-text error-text hidden"></p>
          <button id="friendReconnectBtn" class="btn hidden" type="button">Reconnect</button>
        </div>
      </div>
    </section>

    <section id="waitingScreen" class="screen" aria-label="Waiting Room">
      <div class="top-row">
        <button id="waitingBackBtn" class="btn btn-back" type="button">Back to Menu</button>
      </div>
      <div class="screen-card waiting-card">
        <h2 class="section-title">Waiting for friend...</h2>
        <p id="waitingStatusText" class="helper-text">Connected: 1/2</p>
        <p id="waitingRoleText" class="helper-text">You are Host</p>
        <p id="waitingRoomText" class="helper-text">Room: ----</p>
        <p id="waitingConnectionStatusText" class="helper-text">Status: Connecting...</p>
        <p id="waitingConnectionErrorText" class="helper-text error-text hidden"></p>
        <div id="waitingLinkBlock" class="friend-link-block hidden">
          <label class="field-label" for="waitingHostLinkInput">Host link</label>
          <input id="waitingHostLinkInput" class="text-input" type="text" readonly />
          <label class="field-label" for="waitingGuestLinkInput">Guest link</label>
          <div class="link-copy-row">
            <input id="waitingGuestLinkInput" class="text-input" type="text" readonly />
            <button id="waitingCopyBtn" class="btn btn-copy" type="button">Copy link</button>
          </div>
        </div>
        <button id="waitingReconnectBtn" class="btn hidden" type="button">Reconnect</button>
      </div>
    </section>

    <section id="gameScreen" class="screen" aria-label="Gambit Liar's Match">
      <div class="top-row match-top-row">
        <button id="gameBackBtn" class="btn btn-back" type="button">Back to Menu</button>
        <h2 class="match-brand-title">Gambit Liar's</h2>
        <button id="rulesBtn" class="btn btn-secondary" type="button" aria-label="Open quick rules">Rules</button>
      </div>

      <p id="friendBanner" class="friend-banner hidden">Connected: 1/2 | You are Host | Room: ----</p>

      <main id="gameViewport" class="game-viewport">
        <section class="panel round-panel">
          <h2 id="roundLabel" class="round-label">ROUND 1/10</h2>
          <p id="timerText" class="timer-text">--</p>
          <p id="turnIndicator" class="turn-indicator">Your turn</p>
        </section>

        <section id="topPanel" class="panel player-panel">
          <div class="player-head">
            <span id="topAvatar" class="avatar-art avatar-bot player-avatar"></span>
            <h3 id="topNameText" class="player-name">Opponent</h3>
            <p id="topStatsText" class="player-stats">HP: 5 | Gold: 2</p>
          </div>
          <div id="topCards" class="card-grid" aria-label="Opponent role cards"></div>
        </section>

        <section class="panel current-action-panel">
          <h3 class="panel-subtitle">Current Action</h3>
          <p id="currentActionText" class="current-action-text">Ready.</p>
          <button id="draftAcceptBtn" class="btn mode-btn draft-accept-btn hidden" type="button">ACCEPT</button>
        </section>

        <section id="bottomPanel" class="panel player-panel">
          <div class="player-head">
            <span id="bottomAvatar" class="avatar-art avatar-1 player-avatar"></span>
            <h3 id="bottomNameText" class="player-name">You</h3>
            <p id="bottomStatsText" class="player-stats">HP: 5 | Gold: 2</p>
          </div>
          <div class="bottom-cards-actions">
            <div id="bottomCards" class="card-grid" aria-label="Your role cards"></div>
            <section class="basic-actions" aria-label="Basic actions">
              <button id="interestBtn" class="btn action-btn" type="button">
                INTEREST
                <span id="interestActionDesc" class="action-desc">+1 Gold</span>
              </button>
              <button id="strikeBtn" class="btn action-btn" type="button">
                STRIKE
                <span id="strikeActionDesc" class="action-desc">Deal 1 DMG</span>
                <span class="cost-pill">2</span>
              </button>
            </section>
          </div>
        </section>

        <p class="cards-note">Real and fake roles are assigned each match. Bluff carefully.</p>
      </main>
    </section>

    <section id="resultScreen" class="screen" aria-label="Match Result">
      <div class="screen-card result-card result-summary-card">
        <header class="result-brand">
          <h2 class="section-title result-game-name">Gambit Liar's</h2>
        </header>
        <div class="result-duel">
          <p id="resultDuelNames" class="result-duel-names">Player vs Opponent</p>
          <div class="result-duel-avatars">
            <div id="resultLocalCard" class="result-avatar-card">
              <span id="resultLocalAvatar" class="avatar-art result-avatar-art"></span>
              <p id="resultLocalName" class="result-avatar-name">Player</p>
              <span class="result-winner-tag">WINNER</span>
            </div>
            <div id="resultOpponentCard" class="result-avatar-card">
              <span id="resultOpponentAvatar" class="avatar-art result-avatar-art"></span>
              <p id="resultOpponentName" class="result-avatar-name">Opponent</p>
              <span class="result-winner-tag">WINNER</span>
            </div>
          </div>
        </div>
        <h2 id="resultWinnerText" class="section-title result-headline">YOU WIN</h2>
        <p id="resultSummaryText" class="helper-text">Result summary</p>
        <div class="result-stats-grid">
          <div class="result-stats-card">
            <p id="resultLocalStatsLabel" class="result-stats-label">Player</p>
            <p id="resultLocalHpText" class="result-stats-line">HP: 0</p>
            <p id="resultLocalGoldText" class="result-stats-line">Gold: 0</p>
            <p id="resultLocalRankText" class="result-stats-line">Ranking: 1000</p>
          </div>
          <div class="result-stats-card result-stats-card--right">
            <p id="resultOpponentStatsLabel" class="result-stats-label">Opponent</p>
            <p id="resultOpponentHpText" class="result-stats-line">HP: 0</p>
            <p id="resultOpponentGoldText" class="result-stats-line">Gold: 0</p>
            <p id="resultOpponentRankText" class="result-stats-line">Ranking: 1000</p>
          </div>
        </div>
        <div class="result-actions">
          <button id="playAgainBtn" class="btn mode-btn" type="button">Play Again</button>
          <button id="shareResultBtn" class="btn" type="button">Share</button>
          <button id="backToMenuBtn" class="btn" type="button">Back to Menu</button>
        </div>
        <p class="result-site">Play free at liar-s-clash.vercel.app</p>
      </div>
    </section>
  </div>

  <section id="responseOverlay" class="response-overlay hidden" role="dialog" aria-modal="true" aria-label="Respond to claim">
    <button id="acceptBtn" class="response-btn" type="button">ACCEPT</button>
    <button id="challengeBtn" class="response-btn" type="button">YOU'RE LYING!</button>
  </section>
  <p id="copyToast" class="copy-toast hidden" role="status" aria-live="polite">Copied!</p>
  <p id="actionToast" class="action-toast hidden" role="status" aria-live="polite"></p>

  <section id="tutorialModal" class="modal-overlay tutorial-modal hidden" role="dialog" aria-modal="true" aria-label="Quick tutorial">
    <div class="tutorial-shell">
      <h2 class="section-title tutorial-title">Gambit Liar's Tutorial</h2>
      <p id="tutorialStepText" class="tutorial-step-text">Play a card. You can tell the truth... or bluff.</p>

      <div class="tutorial-demo tutorial-demo-cards">
        <p class="tutorial-demo-title">Card Row</p>
        <div class="tutorial-mini-cards">
          <div class="role-card tutorial-mini-card"><span class="card-label">SIREN</span></div>
          <div class="role-card tutorial-mini-card"><span class="card-label">KNIGHT</span></div>
          <div class="role-card tutorial-mini-card"><span class="card-label">GOBLIN</span></div>
          <div class="role-card tutorial-mini-card"><span class="card-label">ELF</span></div>
        </div>
      </div>

      <div class="tutorial-demo tutorial-decision-demo">
        <p class="tutorial-demo-title">Decision</p>
        <div class="tutorial-decision-row">
          <button class="response-btn tutorial-response-btn" type="button">ACCEPT</button>
          <button class="response-btn tutorial-response-btn" type="button">YOU'RE LYING!</button>
        </div>
      </div>

      <div class="tutorial-demo tutorial-outcome-demo">
        <p class="tutorial-demo-title">Outcomes</p>
        <p class="tutorial-outcome-line">YOU'RE LYING! -> Liar -2 HP</p>
        <p class="tutorial-outcome-line">Wrong accuse -> Accuser -1 HP</p>
      </div>

      <button id="tutorialNextBtn" class="btn mode-btn tutorial-next-btn" type="button">Next</button>
    </div>
  </section>

  <section id="avatarModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-label="Select avatar">
    <div class="modal-card">
      <button id="avatarModalCloseBtn" class="modal-close-btn" type="button" aria-label="Close avatar selector">X</button>
      <h2 class="section-title">Choose Avatar</h2>
      <div class="avatar-grid">
        <button class="avatar-choice" type="button" data-avatar-id="avatar-1">
          <span class="avatar-art avatar-1"></span>
          <span class="avatar-choice-label">Adventurer</span>
        </button>
        <button class="avatar-choice" type="button" data-avatar-id="avatar-2">
          <span class="avatar-art avatar-2"></span>
          <span class="avatar-choice-label">Noble</span>
        </button>
        <button class="avatar-choice" type="button" data-avatar-id="avatar-3">
          <span class="avatar-art avatar-3"></span>
          <span class="avatar-choice-label">Rogue</span>
        </button>
      </div>
    </div>
  </section>

  <section id="rulesModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-label="Quick rules">
    <div class="modal-card">
      <button id="rulesCloseBtn" class="modal-close-btn" type="button" aria-label="Close quick rules">X</button>
      <h2 class="section-title rules-modal-title">Gambit Liar's</h2>
      <p class="helper-text rules-subtitle">Quick Rules</p>
      <pre class="rules-text">=== GAMBIT LIAR'S - QUICK RULES ===

Goal:
Reduce opponent HP to 0.

Pre-match swap phase:
Both players get 4 random characters.
Select 0-4 cards to swap, then tap ACCEPT.
Phase ends when both accept or timer expires.

Turn order:
Each round has 2 actions (one per player).
At turn start, the acting player is:
1) Lower HP
2) If tied -> higher Gold
3) If tied -> alternate

Bluff system:
Play any of your 4 cards (real or fake).
Opponent must ACCEPT or YOU'RE LYING!.

You're lying! resolution:
If role was REAL -> caller loses 1 HP, effect applies.
If role was FAKE -> actor loses 2 HP, effect canceled.
If you hold ELF and catch a lie -> gain +2 Gold.

Characters:
See card list below.

Basic:
INTEREST -> +1 Gold
STRIKE -> 1 damage (2 Gold)

===</pre>
      <div id="rulesRoleList" class="rules-role-list" aria-label="Role list with card images"></div>
    </div>
  </section>

  <section id="premiumModal" class="modal-overlay premium-modal hidden" role="dialog" aria-modal="true" aria-label="Premium">
    <div class="premium-shell">
      <header class="premium-topbar">
        <h2 class="premium-title">Gambit Liar's Premium</h2>
        <button id="premiumCloseBtn" class="modal-close-btn premium-close-btn" type="button" aria-label="Close premium modal">X</button>
      </header>
      <section class="premium-hero">
        <p class="premium-price">$4.99 / month</p>
        <button id="goPremiumBtn" class="btn btn-premium premium-go-btn" type="button">Go Premium</button>
      </section>
      <section class="premium-benefits" aria-label="Premium benefits">
        <article class="premium-benefit"><span class="premium-benefit-icon">&#9670;</span><span>Join all tournaments</span></article>
        <article class="premium-benefit"><span class="premium-benefit-icon">&#9670;</span><span>Weekly prize tournament included!</span></article>
        <article class="premium-benefit"><span class="premium-benefit-icon">&#9670;</span><span>Create private tournaments</span></article>
        <article class="premium-benefit"><span class="premium-benefit-icon">&#9670;</span><span>Exclusive avatars</span></article>
        <article class="premium-benefit"><span class="premium-benefit-icon">&#9670;</span><span>Character skins</span></article>
        <article class="premium-benefit"><span class="premium-benefit-icon">&#9670;</span><span>Special bots + trainer</span></article>
        <article class="premium-benefit"><span class="premium-benefit-icon">&#9670;</span><span>No ads</span></article>
        <article class="premium-benefit"><span class="premium-benefit-icon">&#9670;</span><span>Deep analysis</span></article>
      </section>
      <p class="premium-disclaimer">Premium features do not provide in-game advantages.</p>
    </div>
  </section>

  <script src="supabase-public-config.js"></script>
  <script src="game.js"></script>
</body>
</html>
