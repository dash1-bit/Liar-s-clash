<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Liar's Clash</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="appRoot" class="app-root">
    <section id="homeScreen" class="screen active" aria-label="Home">
      <div class="home-hero">
        <h1 class="app-title">Liar's Clash</h1>
        <p class="home-tagline">Bluff, reveal, and outsmart your opponent.</p>
      </div>
      <div class="screen-card home-card">
        <div class="home-stats-row">
          <p class="level-pill">Level <span id="homeLevelValue">1</span></p>
          <p class="level-pill">Ranking <span id="homeRankingValue">1000</span></p>
        </div>

        <button id="avatarPreviewBtn" class="avatar-preview" type="button" aria-label="Choose avatar">
          <span id="avatarPreviewArt" class="avatar-art avatar-1"></span>
          <span id="avatarPreviewLabel" class="avatar-preview-label">Avatar 1</span>
        </button>

        <label class="field-label" for="playerNameInput">Player Name</label>
        <input id="playerNameInput" class="text-input" type="text" maxlength="18" value="Player" autocomplete="off" />

        <button id="homePlayBtn" class="btn btn-primary btn-play-pulse" type="button">PLAY</button>
      </div>
      <section class="home-tips" aria-label="Tips">
        <p class="home-tips-title">Tips</p>
        <p id="homeTipText" class="home-tip-text">Bluff early to learn how your opponent reacts.</p>
        <div id="homeTipDots" class="home-tip-dots" aria-label="Tip indicators"></div>
      </section>
    </section>

    <section id="modeScreen" class="screen" aria-label="Mode Select">
      <div class="top-row">
        <button id="modeBackBtn" class="btn btn-back" type="button">Back to Menu</button>
      </div>
      <div class="screen-card mode-card">
        <h2 class="section-title">Choose Mode</h2>
        <button id="playBotBtn" class="btn mode-btn" type="button">Play vs Bot</button>
        <button id="playFriendBtn" class="btn mode-btn" type="button">Play vs a Friend</button>
      </div>
    </section>

    <section id="friendScreen" class="screen" aria-label="Friend Setup">
      <div class="top-row">
        <button id="friendBackBtn" class="btn btn-back" type="button">Back to Menu</button>
      </div>
      <div class="screen-card friend-card">
        <h2 class="section-title">Play with a Friend</h2>
        <p class="helper-text">Create a room link and share it. Your friend auto-joins from the link.</p>
        <button id="createLinkBtn" class="btn mode-btn" type="button">Create link</button>

        <div id="friendLinkBlock" class="friend-link-block hidden">
          <label class="field-label" for="hostLinkInput">Host link</label>
          <input id="hostLinkInput" class="text-input" type="text" readonly />
          <label class="field-label" for="friendLinkInput">Guest link</label>
          <div class="link-copy-row">
            <input id="friendLinkInput" class="text-input" type="text" readonly />
            <button id="copyFriendLinkBtn" class="btn btn-copy" type="button">Copy link</button>
          </div>
          <p id="friendConnectionStatusText" class="helper-text">Status: Idle</p>
          <p id="friendConnectionErrorText" class="helper-text error-text hidden"></p>
          <button id="friendReconnectBtn" class="btn hidden" type="button">Reconnect</button>
        </div>
      </div>
    </section>

    <section id="waitingScreen" class="screen" aria-label="Waiting Room">
      <div class="top-row">
        <button id="waitingBackBtn" class="btn btn-back" type="button">Back to Menu</button>
      </div>
      <div class="screen-card waiting-card">
        <h2 class="section-title">Waiting for friend...</h2>
        <p id="waitingStatusText" class="helper-text">Connected: 1/2</p>
        <p id="waitingRoleText" class="helper-text">You are Host</p>
        <p id="waitingRoomText" class="helper-text">Room: ----</p>
        <p id="waitingConnectionStatusText" class="helper-text">Status: Connecting...</p>
        <p id="waitingConnectionErrorText" class="helper-text error-text hidden"></p>
        <div id="waitingLinkBlock" class="friend-link-block hidden">
          <label class="field-label" for="waitingHostLinkInput">Host link</label>
          <input id="waitingHostLinkInput" class="text-input" type="text" readonly />
          <label class="field-label" for="waitingGuestLinkInput">Guest link</label>
          <div class="link-copy-row">
            <input id="waitingGuestLinkInput" class="text-input" type="text" readonly />
            <button id="waitingCopyBtn" class="btn btn-copy" type="button">Copy link</button>
          </div>
        </div>
        <button id="waitingReconnectBtn" class="btn hidden" type="button">Reconnect</button>
      </div>
    </section>

    <section id="gameScreen" class="screen" aria-label="Liar's Clash Match">
      <div class="top-row">
        <button id="gameBackBtn" class="btn btn-back" type="button">Back to Menu</button>
        <button id="rulesBtn" class="btn btn-secondary" type="button" aria-label="Open quick rules">Rules</button>
      </div>

      <p id="friendBanner" class="friend-banner hidden">Connected: 1/2 | You are Host | Room: ----</p>

      <main id="gameViewport" class="game-viewport">
        <section class="panel round-panel">
          <h2 id="roundLabel" class="round-label">ROUND 1/10</h2>
          <p id="timerText" class="timer-text">--</p>
          <p id="turnIndicator" class="turn-indicator">Your turn</p>
        </section>

        <section id="topPanel" class="panel player-panel">
          <div class="player-head">
            <span id="topAvatar" class="avatar-art avatar-bot player-avatar"></span>
            <div>
              <h3 id="topNameText" class="player-name">Opponent</h3>
              <p id="topStatsText" class="player-stats">HP: 5 | Gold: 2</p>
            </div>
          </div>
          <div id="topCards" class="card-grid" aria-label="Opponent role cards"></div>
        </section>

        <section class="panel current-action-panel">
          <h3 class="panel-subtitle">Current Action</h3>
          <p id="currentActionText" class="current-action-text">Ready.</p>
          <button id="draftAcceptBtn" class="btn mode-btn draft-accept-btn hidden" type="button">ACCEPT</button>
        </section>

        <section id="bottomPanel" class="panel player-panel">
          <div class="player-head">
            <span id="bottomAvatar" class="avatar-art avatar-1 player-avatar"></span>
            <div>
              <h3 id="bottomNameText" class="player-name">You</h3>
              <p id="bottomStatsText" class="player-stats">HP: 5 | Gold: 2</p>
            </div>
          </div>
          <div class="bottom-cards-actions">
            <div id="bottomCards" class="card-grid" aria-label="Your role cards"></div>
            <section class="basic-actions" aria-label="Basic actions">
              <button id="interestBtn" class="btn action-btn" type="button">
                INTEREST
                <span id="interestActionDesc" class="action-desc">+1 Gold</span>
              </button>
              <button id="strikeBtn" class="btn action-btn" type="button">
                STRIKE
                <span id="strikeActionDesc" class="action-desc">Deal 1 DMG</span>
                <span class="cost-pill">2</span>
              </button>
            </section>
          </div>
        </section>

        <p class="cards-note">Real and fake roles are assigned each match. Bluff carefully.</p>
      </main>
    </section>

    <section id="resultScreen" class="screen" aria-label="Match Result">
      <div class="top-row">
        <button id="resultBackBtn" class="btn btn-back" type="button">Back to Menu</button>
      </div>
      <div class="screen-card result-card">
        <h2 id="resultWinnerText" class="section-title">YOU WIN</h2>
        <p id="resultSummaryText" class="helper-text">Result summary</p>
        <p id="resultStatsText" class="helper-text">Player: 0 HP, 0 Gold | Opponent: 0 HP, 0 Gold</p>
        <div class="result-actions">
          <button id="playAgainBtn" class="btn mode-btn" type="button">Play Again</button>
          <button id="backToMenuBtn" class="btn" type="button">Back to Menu</button>
        </div>
      </div>
    </section>
  </div>

  <section id="responseOverlay" class="response-overlay hidden" role="dialog" aria-modal="true" aria-label="Respond to claim">
    <button id="acceptBtn" class="response-btn" type="button">ACCEPT</button>
    <button id="challengeBtn" class="response-btn" type="button">YOU'RE LYING!</button>
  </section>
  <p id="copyToast" class="copy-toast hidden" role="status" aria-live="polite">Copied!</p>
  <p id="actionToast" class="action-toast hidden" role="status" aria-live="polite"></p>

  <section id="avatarModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-label="Select avatar">
    <div class="modal-card">
      <button id="avatarModalCloseBtn" class="modal-close-btn" type="button" aria-label="Close avatar selector">X</button>
      <h2 class="section-title">Choose Avatar</h2>
      <div class="avatar-grid">
        <button class="avatar-choice" type="button" data-avatar-id="avatar-1">
          <span class="avatar-art avatar-1"></span>
          <span class="avatar-choice-label">Adventurer</span>
        </button>
        <button class="avatar-choice" type="button" data-avatar-id="avatar-2">
          <span class="avatar-art avatar-2"></span>
          <span class="avatar-choice-label">Noble</span>
        </button>
        <button class="avatar-choice" type="button" data-avatar-id="avatar-3">
          <span class="avatar-art avatar-3"></span>
          <span class="avatar-choice-label">Rogue</span>
        </button>
      </div>
    </div>
  </section>

  <section id="rulesModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-label="Quick rules">
    <div class="modal-card">
      <button id="rulesCloseBtn" class="modal-close-btn" type="button" aria-label="Close quick rules">X</button>
      <pre class="rules-text">=== LIAR'S CLASH - QUICK RULES ===

Goal:
Reduce opponent HP to 0.

Pre-match swap phase:
Both players get 4 random characters.
Select 0-4 cards to swap, then tap ACCEPT.
Phase ends when both accept or timer expires.

Turn order:
Each round has 2 actions (one per player).
At turn start, the acting player is:
1) Lower HP
2) If tied -> higher Gold
3) If tied -> alternate

Bluff system:
Play any of your 4 cards (real or fake).
Opponent must ACCEPT or YOU'RE LYING!.

You're lying! resolution:
If role was REAL -> caller loses 1 HP, effect applies.
If role was FAKE -> actor loses 2 HP, effect canceled.
If you hold ELF and catch a lie -> gain +2 Gold.

Characters:
See card list below.

Basic:
INTEREST -> +1 Gold
STRIKE -> 1 damage (2 Gold)

===</pre>
      <div id="rulesRoleList" class="rules-role-list" aria-label="Role list with card images"></div>
    </div>
  </section>

  <script src="supabase-public-config.js"></script>
  <script src="game.js"></script>
</body>
</html>
