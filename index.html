<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CLAIM DUEL</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <section id="menuScreen" class="menu-screen">
    <div class="menu-card">
      <h1>CLAIM DUEL</h1>
      <p id="menuLevelText" class="menu-level">Level 1</p>
      <button id="startMatchBtn" type="button">Start Match</button>
    </div>
  </section>

  <main id="gameScreen" class="app-shell hidden" aria-label="Claim Duel Match">
    <section class="panel round-header">
      <button id="rulesBtn" class="round-help-btn" type="button" aria-label="Open quick rules">?</button>
      <h1 id="roundLabel" class="round-label">ROUND 1/10</h1>
      <p id="timerText" class="timer-overlay" aria-live="polite">--</p>
      <p id="turnIndicator" class="turn-indicator">Your turn</p>
      <p id="smallLevelText" class="small-level">Lv.1</p>
    </section>

    <section id="botPanel" class="panel player-panel">
      <h2 class="panel-title">BOT</h2>
      <div id="botCards" class="bot-cards" aria-label="Bot role cards"></div>

      <div class="figure-slot">
        <img id="botFigureImg" src="assets/figures/bot.png" alt="Bot figure" />
        <div id="botFigureFallback" class="figure-fallback">[Bot Figure PNG]<br />(placeholder)</div>
      </div>

      <div class="stats-row">
        <p id="botHpText" class="stat-line">‚ù§Ô∏è HP: 5</p>
        <p id="botGoldText" class="stat-line">ü™ô Gold: 2</p>
      </div>
    </section>

    <section class="panel current-action-panel">
      <h2 class="panel-title action-title">CURRENT ACTION</h2>
      <p id="currentActionText" class="current-action-text">Ready.</p>
    </section>

    <section id="humanPanel" class="panel player-panel">
      <h2 class="panel-title">HUMAN</h2>

      <div class="figure-slot human-figure">
        <img id="humanFigureImg" src="assets/figures/human.png" alt="Human figure" />
        <div id="humanFigureFallback" class="figure-fallback">[Your Figure PNG]<br />(placeholder)</div>
      </div>

      <div class="stats-row">
        <p id="humanHpText" class="stat-line">‚ù§Ô∏è HP: 5</p>
        <p id="humanGoldText" class="stat-line">ü™ô Gold: 2</p>
      </div>
    </section>

    <section class="basic-actions" aria-label="Basic actions">
      <button id="interestBtn" class="basic-btn" type="button">
        INTEREST
        <span class="basic-desc">+1 ü™ô</span>
      </button>
      <button id="strikeBtn" class="basic-btn strike-btn" type="button">
        STRIKE
        <span class="basic-desc">Deal 1 ‚öîÔ∏è</span>
        <span class="basic-cost-badge">2</span>
      </button>
    </section>

    <section id="humanCards" class="human-cards" aria-label="Your role cards"></section>
    <p class="cards-note">First 2 cards are real roles. Last 2 are fake roles.</p>
  </main>

  <section
    id="responseOverlay"
    class="response-overlay hidden"
    role="dialog"
    aria-modal="true"
    aria-label="Respond to claim"
  >
    <button id="acceptBtn" class="response-btn" type="button" data-response="ACCEPT">ACCEPT</button>
    <button id="challengeBtn" class="response-btn" type="button" data-response="CHALLENGE">CHALLENGE</button>
  </section>

  <section id="resultScreen" class="result-screen hidden" role="dialog" aria-modal="true" aria-label="Match result">
    <div class="result-card">
      <h2 id="resultWinnerText">YOU WIN</h2>
      <p id="resultSummaryText">Result summary</p>
      <p id="resultStatsText">Human: 0 HP, 0 Gold | Bot: 0 HP, 0 Gold</p>

      <div class="xp-panel">
        <p id="resultLevelText">Level 1</p>
        <p id="resultXpText">0 / 100 XP</p>
        <div class="xp-bar">
          <div id="resultXpFill" class="xp-fill"></div>
        </div>
      </div>

      <div class="result-actions">
        <button id="playAgainBtn" type="button">Play Again</button>
        <button id="backToMenuBtn" type="button">Back to Menu</button>
      </div>
    </div>
  </section>

  <section id="rulesModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-label="Quick rules">
    <div class="modal-card">
      <button id="rulesCloseBtn" class="modal-close-btn" type="button" aria-label="Close quick rules">X</button>
      <pre class="rules-text">=== CLAIM DUEL - QUICK RULES ===

Goal:
Reduce opponent HP to 0.

Turn order:
Each round has 2 actions (one per player).
At turn start, the acting player is:
1) Lower HP
2) If tied -> higher Gold
3) If tied -> alternate

Bluff system:
You may play any of your 4 role cards (even fake).
Opponent must ACCEPT or CHALLENGE.

Challenge resolution:
If role was REAL -> challenger loses 1 HP, effect applies.
If role was FAKE -> actor loses 2 HP, effect canceled.
If you hold ELF and defend successfully -> gain +1 Gold.

Roles:
SIREN -> skip opponent next action
DWARF -> shield next damage (1 Gold)
KNIGHT -> 2 damage (2 Gold)
GOBLIN -> steal 1 Gold (max 3 uses)
ENT -> heal 2 HP (2 Gold)
ELF -> passive bonus

Basic:
INTEREST -> +1 Gold
STRIKE -> 1 damage (2 Gold)

===</pre>
    </div>
  </section>

  <script src="supabase-config.js"></script>
  <script type="module" src="supabase-client.js"></script>
  <script src="game.js"></script>
</body>
</html>
